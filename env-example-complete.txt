# ==============================================
# Configuration Altiora - Variables d'environnement
# ==============================================
# Copier ce fichier vers .env et ajuster les valeurs

# --------------------------------------------------
# Environnement général
# --------------------------------------------------
ENVIRONMENT=development  # development, staging, production, test
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# --------------------------------------------------
# Ollama (Modèles IA)
# --------------------------------------------------
OLLAMA_HOST=http://localhost:11434
OLLAMA_TIMEOUT=180
OLLAMA_KEEP_ALIVE=30m

# Modèles
QWEN3_MODEL=qwen3-sfd-analyzer
STARCODER2_MODEL=starcoder2-playwright

# --------------------------------------------------
# Redis (Cache distribué)
# --------------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=  # Laisser vide pour dev, obligatoire en prod
REDIS_DB=0

# TTL Cache (en secondes)
REDIS_TTL_SFD=86400      # 24h
REDIS_TTL_TESTS=43200    # 12h  
REDIS_TTL_OCR=604800     # 7j
REDIS_TTL_MODEL=3600     # 1h

# --------------------------------------------------
# Services Microservices
# --------------------------------------------------
# OCR Service (Doctoplus)
OCR_SERVICE_HOST=localhost
OCR_SERVICE_PORT=8001
OCR_SERVICE_TIMEOUT=60
DOCTOPLUS_CONFIG=/app/config/config.json

# ALM Service
ALM_SERVICE_HOST=localhost
ALM_SERVICE_PORT=8002
ALM_SERVICE_TIMEOUT=120
ALM_API_URL=http://alm-server:8080  # URL du serveur ALM réel
ALM_API_KEY=  # Clé API ALM

# Excel Service
EXCEL_SERVICE_HOST=localhost
EXCEL_SERVICE_PORT=8003
EXCEL_SERVICE_TIMEOUT=60

# Playwright Service
PLAYWRIGHT_SERVICE_HOST=localhost
PLAYWRIGHT_SERVICE_PORT=8004
PLAYWRIGHT_SERVICE_TIMEOUT=300
PLAYWRIGHT_WORKERS=4
PLAYWRIGHT_BROWSER=chromium  # chromium, firefox, webkit
PLAYWRIGHT_HEADED=false
PLAYWRIGHT_SCREENSHOT_ON_FAILURE=true
PLAYWRIGHT_VIDEO_ON_FAILURE=true

# --------------------------------------------------
# Sécurité
# --------------------------------------------------
JWT_SECRET_KEY=
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=1440  # 24h

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# --------------------------------------------------
# Chemins et répertoires
# --------------------------------------------------
DATA_DIR=./data
MODELS_DIR=./models
LOGS_DIR=./logs
REPORTS_DIR=./reports
TEMP_DIR=./temp
CACHE_DIR=./cache

# --------------------------------------------------
# Pipeline d'orchestration
# --------------------------------------------------
PIPELINE_MAX_PARALLEL_TESTS=5
PIPELINE_MAX_PARALLEL_SCENARIOS=10
PIPELINE_FALLBACK_ENABLED=true
PIPELINE_RETRY_MAX_ATTEMPTS=3
PIPELINE_RETRY_BACKOFF_FACTOR=2.0

# --------------------------------------------------
# Base de données (optionnel)
# --------------------------------------------------
# DATABASE_URL=postgresql://user:password@localhost:5432/altiora_db

# --------------------------------------------------
# Monitoring (optionnel)
# --------------------------------------------------
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
DASH_ENABLED=true
DASH_PORT=8050

# --------------------------------------------------
# Docker specific (si utilisation avec Docker)
# --------------------------------------------------
COMPOSE_PROJECT_NAME=altiora
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Limites de ressources
OLLAMA_MEMORY_LIMIT=12G
OLLAMA_CPU_LIMIT=8
REDIS_MEMORY_LIMIT=1G
OCR_MEMORY_LIMIT=4G

# --------------------------------------------------
# Développement local
# --------------------------------------------------
# Pour bypasser certains services en dev
MOCK_OCR_SERVICE=false
MOCK_ALM_SERVICE=false
USE_LOCAL_MODELS=false

# --------------------------------------------------
# Webhook et notifications (optionnel)
# --------------------------------------------------
# SLACK_WEBHOOK_URL=
# TEAMS_WEBHOOK_URL=
# EMAIL_SMTP_HOST=
# EMAIL_SMTP_PORT=587
# EMAIL_FROM=noreply@altiora.local